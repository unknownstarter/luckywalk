# LuckyWalk 클릭 아키텍처 & UX 플로우 - 최종본

## 1. 전체 UX 플로우 개요

### 1.1 사용자 여정 맵
```
앱 시작 → 로그인 → 온보딩 → 홈 → 보상 수령 → 응모(바텀시트) → 결과 확인 → KYC 제출 → 당첨금 수령
```

### 1.2 주요 터치포인트
- **진입점**: 스플래시, 딥링크
- **보상 수령**: 출석체크, 걸음수, 광고, 초대 (모두 홈에서 인라인)
- **응모**: 바텀시트 모달로 수량 선택 및 제출
- **결과**: 당첨 확인, KYC 제출, 당첨금 수령

## 2. 스크린별 클릭 아키텍처

### 2.1 스플래시 화면 (/)
**CTA**: 없음 (자동 전환)
**조건**: 앱 초기화 완료 시 자동으로 다음 화면으로 이동
**실패 처리**: 초기화 실패 시 에러 화면 표시

### 2.2 로그인 화면 (/login)
**CTA 1**: Apple 로그인 버튼
- **조건**: 항상 활성
- **액션**: Apple OAuth 시작
- **성공**: 홈 화면으로 이동
- **실패**: 에러 메시지 표시, 재시도 버튼 제공

**CTA 2**: Kakao 로그인 버튼
- **조건**: 항상 활성
- **액션**: Kakao OAuth 시작
- **성공**: 홈 화면으로 이동
- **실패**: 에러 메시지 표시, 재시도 버튼 제공

**CTA 3**: 약관 링크
- **조건**: 항상 활성
- **액션**: 약관 페이지 열기

### 2.3 온보딩 화면 (/onboarding)
**CTA 1**: 알림 권한 요청 버튼
- **조건**: 권한 미승인 시 활성
- **액션**: 알림 권한 요청
- **성공**: 다음 권한 요청으로 이동
- **실패**: 권한 거부 안내, 다음 단계로 이동

**CTA 2**: 건강/활동 권한 요청 버튼
- **조건**: 이전 권한 처리 완료 시 활성
- **액션**: 건강/활동 권한 요청
- **성공**: 홈 화면으로 이동
- **실패**: 권한 거부 안내, 홈 화면으로 이동

**CTA 3**: 건너뛰기 버튼
- **조건**: 항상 활성
- **액션**: 권한 요청 건너뛰고 홈 화면으로 이동

### 2.4 홈 화면 (/home)

**CTA 1**: 응모하기 버튼 (히어로 카드)
- **조건**: 항상 활성
- **액션**: 응모 바텀시트 모달 오픈
- **성공**: 바텀시트 표시
- **실패**: 에러 메시지 표시

**CTA 2**: "어떻게 하는지 궁금하신가요?" 링크
- **조건**: 항상 활성
- **액션**: `/how-it-works` 화면으로 이동
- **성공**: 이용방법 화면 표시
- **실패**: 에러 메시지 표시

**CTA 3**: 출석체크 "받기" 버튼
- **조건**:
  - 당일 미출석 시 활성
  - 자정 리셋 후 활성
- **액션**: 출석체크 처리 → 보상 지급
- **성공**: 출석체크 완료 알림, 버튼 비활성화
- **실패**: 재시도 버튼 표시

**CTA 4**: 걸음수 보상 수령 버튼 (1k~10k)
- **조건**:
  - 해당 임계값 달성 시 활성
  - 당일 미수령 시 활성
  - 건강/활동 권한 승인 시 활성
- **액션**: RV 시작 → 광고 완료 → 서버 검증 → 보상 지급
- **성공**: 보상 지급 알림, 버튼 비활성화
- **실패**: 재시도 버튼 표시, 실패 사유 안내

**CTA 5**: 광고 시청 버튼 (1~10번)
- **조건**: 
  - 이전 광고 완료 시 활성 (순차 해금)
  - 일일 제한(10회) 미달성 시 활성
  - 네트워크 연결 상태
- **액션**: 광고 세션 시작 → 광고 시청 → 서버 검증 → 보상 지급
- **성공**: 다음 광고 버튼 활성화, 보상 지급 알림
- **실패**: 재시도 버튼 표시, 실패 사유 안내

**CTA 6**: 초대 링크 공유 버튼
- **조건**: 항상 활성
- **액션**: 초대 링크 생성 → 공유 다이얼로그 표시
- **성공**: 공유 완료 알림
- **실패**: 재시도 버튼 표시

**CTA 7**: 하단 네비게이션 버튼
- **조건**: 항상 활성
- **액션**: 해당 화면으로 이동

### 2.5 응모 바텀시트 (모달 라우트) (/submit)
**CTA 1**: 수량 스테퍼 버튼 (+/-)
- **조건**:
  - 보유 복권 수 범위 내 시 활성
  - 최소 100장, 100단위 증감, 최대 보유치
- **액션**: 응모 장수 증감
- **성공**: 응모 장수 업데이트
- **실패**: 에러 메시지 표시

**CTA 2**: 응모하기 버튼
- **조건**:
  - 응모 장수 100장 이상 시 활성
  - 응모 기간 내 시 활성
  - 보유 복권 수 충분 시 활성
- **액션**: 서버 트랜잭션 (티켓 발행, 지갑 차감)
- **성공**: 토스트 "응모 완료!" → 모달 닫기 → 홈 상단 카운터/내 응모 반영
- **실패**: 마감/네트워크/중복 등 → 메시지 & 유지 또는 닫기

**CTA 3**: 취소 버튼
- **조건**: 항상 활성
- **액션**: 모달 닫기

### 2.6 광고보상 화면 (/rewards/ads)
**CTA 1**: 광고 시청 버튼
- **조건**:
  - 이전 광고 완료 시 활성
  - 일일 제한 미달성 시 활성
  - 네트워크 연결 상태
- **액션**: 광고 세션 시작 → 광고 시청 → 서버 검증 → 보상 지급
- **성공**: 다음 광고 버튼 활성화, 보상 지급 알림
- **실패**: 재시도 버튼 표시, 실패 사유 안내

**CTA 2**: 뒤로가기 버튼
- **조건**: 항상 활성
- **액션**: 홈 화면으로 이동

### 2.6 걸음수보상 화면 (/rewards/steps)
**CTA 1**: 보상 수령 버튼 (각 임계값별)
- **조건**:
  - 해당 임계값 달성 시 활성
  - 당일 미수령 시 활성
- **액션**: 보상 지급
- **성공**: 보상 지급 알림, 버튼 비활성화
- **실패**: 재시도 버튼 표시

**CTA 2**: 뒤로가기 버튼
- **조건**: 항상 활성
- **액션**: 홈 화면으로 이동

### 2.7 출석체크 화면 (/attendance)
**CTA 1**: 출석체크 버튼
- **조건**:
  - 당일 미출석 시 활성
- **액션**: 출석체크 처리 → 보상 지급
- **성공**: 출석체크 완료 알림, 버튼 비활성화
- **실패**: 재시도 버튼 표시

**CTA 2**: 뒤로가기 버튼
- **조건**: 항상 활성
- **액션**: 홈 화면으로 이동

### 2.8 초대 화면 (/referral)
**CTA 1**: 초대 링크 공유 버튼
- **조건**: 항상 활성
- **액션**: 초대 링크 생성 → 공유 다이얼로그 표시
- **성공**: 공유 완료 알림
- **실패**: 재시도 버튼 표시

**CTA 2**: 뒤로가기 버튼
- **조건**: 항상 활성
- **액션**: 홈 화면으로 이동

### 2.9 내 응모 화면 (/my-tickets)
**CTA 1**: 응모하기 버튼
- **조건**:
  - 보유 복권 1장 이상 시 활성
  - 응모 기간 내 시 활성
- **액션**: 응모 화면으로 이동
- **성공**: 응모 화면 표시
- **실패**: 에러 메시지 표시

**CTA 2**: 응모 내역 카드
- **조건**: 응모 내역 있을 시 활성
- **액션**: 응모 상세 화면으로 이동
- **성공**: 상세 화면 표시
- **실패**: 에러 메시지 표시

**CTA 3**: 하단 네비게이션 버튼
- **조건**: 항상 활성
- **액션**: 해당 화면으로 이동

### 2.10 응모 화면 (모달)
**CTA 1**: 응모 장수 선택 버튼 (+/-)
- **조건**:
  - 보유 복권 수 범위 내 시 활성
- **액션**: 응모 장수 증감
- **성공**: 응모 장수 업데이트
- **실패**: 에러 메시지 표시

**CTA 2**: 응모하기 버튼
- **조건**:
  - 응모 장수 1장 이상 시 활성
  - 응모 기간 내 시 활성
- **액션**: 복권 생성 → 응모 처리
- **성공**: 응모 완료 알림, 홈 화면으로 이동
- **실패**: 에러 메시지 표시, 재시도 버튼 제공

**CTA 3**: 취소 버튼
- **조건**: 항상 활성
- **액션**: 모달 닫기

### 2.11 응모 결과 화면 (/results)
**CTA 1**: 결과 카드
- **조건**: 결과 있을 시 활성
- **액션**: 결과 상세 화면으로 이동
- **성공**: 상세 화면 표시
- **실패**: 에러 메시지 표시

**CTA 2**: KYC 제출 버튼 (1,2등만)
- **조건**:
  - 1등 또는 2등 당첨 시 활성
  - KYC 미제출 시 활성
- **액션**: KYC 제출 화면으로 이동
- **성공**: KYC 화면 표시
- **실패**: 에러 메시지 표시

**CTA 3**: 하단 네비게이션 버튼
- **조건**: 항상 활성
- **액션**: 해당 화면으로 이동

### 2.12 KYC 제출 화면 (/results/:roundId/kyc)
**CTA 1**: 신분증 사진 업로드 버튼
- **조건**: 항상 활성
- **액션**: 카메라/갤러리 열기 → 사진 선택 → 업로드
- **성공**: 사진 업로드 완료, 미리보기 표시
- **실패**: 재시도 버튼 표시, 에러 메시지

**CTA 2**: 통장 사본 업로드 버튼
- **조건**: 항상 활성
- **액션**: 카메라/갤러리 열기 → 사진 선택 → 업로드
- **성공**: 사진 업로드 완료, 미리보기 표시
- **실패**: 재시도 버튼 표시, 에러 메시지

**CTA 3**: 제출 버튼
- **조건**:
  - 모든 필수 정보 입력 완료 시 활성
  - 파일 업로드 완료 시 활성
- **액션**: KYC 정보 제출
- **성공**: 제출 완료 알림, 홈 화면으로 이동
- **실패**: 에러 메시지 표시, 재시도 버튼 제공

**CTA 4**: 취소 버튼
- **조건**: 항상 활성
- **액션**: 이전 화면으로 이동

### 2.13 이용방법 화면 (/how-it-works)
**CTA 1**: 뒤로가기 버튼
- **조건**: 항상 활성
- **액션**: 이전 화면으로 이동

**CTA 2**: 약관 링크
- **조건**: 항상 활성
- **액션**: 약관 페이지 열기

### 2.14 설정 화면 (/settings)
**CTA 1**: 알림 설정 토글
- **조건**: 항상 활성
- **액션**: 알림 설정 변경
- **성공**: 설정 저장 완료
- **실패**: 에러 메시지 표시

**CTA 2**: 로그아웃 버튼
- **조건**: 항상 활성
- **액션**: 로그아웃 처리
- **성공**: 로그인 화면으로 이동
- **실패**: 에러 메시지 표시

**CTA 3**: 뒤로가기 버튼
- **조건**: 항상 활성
- **액션**: 이전 화면으로 이동

## 3. 방어코딩 및 에러 처리

### 3.1 광고 시청 방어코딩
**중복탭 방지**:
- 광고 시청 중일 때 버튼 비활성화
- 탭 스로틀링 적용 (500ms)
- 진행 상태 표시

**포커스 전환 처리**:
- 앱 백그라운드 전환 시 광고 세션 무효화
- 포그라운드 복귀 시 재검증 요청
- 세션 토큰 만료 시 재시작

**네트워크 오류 처리**:
- 네트워크 연결 상태 확인
- 오프라인 시 재시도 버튼 표시
- 타임아웃 설정 (30초)

### 3.2 걸음수 데이터 방어코딩
**권한 확인**:
- 건강/활동 권한 상태 확인
- 권한 거부 시 대체 루트 안내
- 권한 재요청 버튼 제공

**데이터 검증**:
- 걸음수 데이터 유효성 검사
- 비정상적인 값 필터링
- 캐시 데이터와 실시간 데이터 비교

### 3.3 응모 처리 방어코딩
**중복 응모 방지**:
- 응모 중일 때 버튼 비활성화
- 서버 사이드 중복 검증
- 응모 완료 후 상태 업데이트

**데이터 검증**:
- 복권 번호 유효성 검사
- 응모 기간 확인
- 보유 복권 수 확인

### 3.4 KYC 제출 방어코딩
**파일 업로드 검증**:
- 파일 크기 제한 (5MB)
- 파일 형식 검증 (JPG, PNG)
- 이미지 품질 확인

**개인정보 보호**:
- 민감 정보 암호화
- 로컬 저장 금지
- 업로드 후 로컬 파일 삭제

## 4. 사용자 피드백 및 상태 표시

### 4.1 로딩 상태
- **로딩 인디케이터**: 스피너, 프로그레스 바
- **로딩 메시지**: "처리 중입니다...", "업로드 중..."
- **예상 시간**: 진행률 표시

### 4.2 성공 상태
- **성공 메시지**: "완료되었습니다!", "보상이 지급되었습니다!"
- **시각적 피드백**: 체크마크, 애니메이션
- **다음 액션 안내**: "홈으로 돌아가기", "다음 단계"

### 4.3 에러 상태
- **에러 메시지**: 구체적인 실패 사유
- **재시도 버튼**: "다시 시도", "재시작"
- **대안 제시**: "다른 방법으로 시도", "고객지원 문의"

### 4.4 빈 상태
- **빈 상태 메시지**: "아직 응모 내역이 없습니다"
- **액션 유도**: "첫 응모하기", "보상 받기"
- **도움말**: "이용방법 보기"

## 5. 접근성 및 사용성

### 5.1 접근성
- **스크린 리더**: 모든 버튼에 적절한 라벨
- **색상 대비**: WCAG 2.1 AA 기준 준수
- **터치 영역**: 최소 44x44pt 크기

### 5.2 사용성
- **직관적 아이콘**: 일반적으로 인식되는 아이콘 사용
- **일관된 네비게이션**: 하단 탭 바 고정
- **빠른 액션**: 자주 사용하는 기능을 쉽게 접근

### 5.3 성능
- **빠른 응답**: 버튼 탭 후 100ms 내 반응
- **부드러운 애니메이션**: 60fps 유지
- **효율적인 로딩**: 필요한 데이터만 로드
