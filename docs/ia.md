# LuckyWalk IA (Information Architecture) - 최종본

## 0) 탭 구조 (Bottom Navigation)

1. **Home** (`/home`)
2. **응모하기** (`/submit`) — 응모 바텀시트 직행(모달 라우트)
3. **내 응모** (`/my-tickets`)
4. **응모 결과** (`/results`)
5. **설정** (`/settings`)

> 모든 탭은 `AuthGuard` 필요. 세션 만료(30일) 시 `/login`으로.

## 1. 상위 정보 구조

### 1.1 전체 네비게이션 맵
```
스플래시 (/)
├── 로그인 (/login)
├── 온보딩 (/onboarding)
└── 메인 앱
    ├── 홈 (/home)
    │   ├── 출석체크 (인라인)
    │   ├── 걸음수보상 (인라인)
    │   ├── 광고보상 (인라인)
    │   └── 초대 (인라인)
    ├── 응모하기 (/submit) [모달]
    ├── 내 응모 (/my-tickets)
    ├── 응모 결과 (/results)
    │   ├── 결과 상세 (/results/:roundId)
    │   └── KYC 제출 (/results/:roundId/kyc)
    ├── 이용방법 (/how-it-works)
    ├── 설정 (/settings)
    ├── 초대 (/referral)
    └── 어드민 (/admin) [권한 필요]
        ├── 회차 관리 (/admin/rounds)
        └── 회차 상세 (/admin/rounds/:roundId)
```

### 1.2 딥링크 구조
- **초대**: `luckywalk://ref/join?code=XXXX`
- **결과 공유**: `luckywalk://results/:roundId`

## 2. 스크린별 상세 정보 구조

### 2.1 스플래시 화면 (/)
**목적**: 앱 로딩 및 초기화
**컨텐츠**:
- 앱 로고 및 이름
- 로딩 인디케이터
**상태**:
- 로딩 중
- 로딩 완료
**에러 처리**:
- 네트워크 오류
- 초기화 실패
**권한 요구사항**: 없음

### 2.2 로그인 화면 (/login)
**목적**: 사용자 인증
**컨텐츠**:
- 앱 소개 문구
- Apple 로그인 버튼
- Kakao 로그인 버튼
- 약관 및 개인정보처리방침 링크
**상태**:
- 로그인 대기
- 로그인 진행 중
- 로그인 성공
- 로그인 실패
**에러 처리**:
- OAuth 오류
- 네트워크 오류
- 계정 연동 실패
**권한 요구사항**: 없음

### 2.3 온보딩 화면 (/onboarding)
**목적**: 앱 사용법 안내 및 권한 요청
**컨텐츠**:
- 앱 사용법 설명
- 권한 요청 (알림, 건강, 활동)
- 다음 버튼
**상태**:
- 권한 요청 대기
- 권한 승인됨
- 권한 거부됨
**에러 처리**:
- 권한 요청 실패
**권한 요구사항**: 없음

### 2.4 홈 화면 (/home)
**목적**: 메인 대시보드 및 보상 수령
**컨텐츠**:
- **헤더/히어로(회차 카드)**: 회차번호, 당첨금 총액, 발표 예정일시, 상태 뱃지
- **출석체크 섹션**: 매일 출석체크로 복권 3장
- **걸음수보상 섹션**: 1k~10k 걸음 임계값별 복권 지급
- **광고보상 섹션**: 1~10번 순차 해금, 지급량 1/1/1/3/3/3/5/5/5/10
- **하단 고정 배너**: 공지/이벤트/규정 링크
**상태**:
- 데이터 로딩 중
- 보상 수령 가능/완료/불가
- 권한 필요/거부
- 네트워크 오류
**에러 처리**:
- 데이터 로드 실패
- 보상 수령 실패
- 광고 로드 실패
- 권한 거부 안내
**권한 요구사항**: 인증된 사용자

### 2.5 응모 바텀시트 (모달 라우트) (/submit)
**목적**: 복권 응모 수량 선택 및 제출
**컨텐츠**:
- 타이틀: "얼마나 응모할까요?"
- 회차 카드: 회차번호, 발표 예정일, 상금 뱃지, 남은 기간
- 보유 복권 수 표시 (파란 텍스트 링크형)
- 수량 스테퍼: [- 100 +] (최소 100장, 100단위 증감, 최대 보유치)
- 규칙 안내: "*한번에 100장부터 응모할 수 있어요"
- 응모하기 버튼
**상태**:
- 보유 복권 < 100장: 버튼 비활성 & 도움말
- 보유 복권 ≥ 100장: 버튼 활성
- 응모 진행 중
- 응모 완료
- 응모 실패
**에러 처리**:
- 네트워크 오류
- 회차 상태 변경 (마감)
- 중복 응모
- 토스트 메시지 & 모달 닫기
**권한 요구사항**: 인증된 사용자

### 2.6 광고보상 화면 (/rewards/ads)
**목적**: 광고 시청을 통한 복권 지급
**컨텐츠**:
- 광고 시청 진행 상황 (1~10번)
- 각 단계별 보상 정보
- 광고 시청 버튼
- 완료된 단계 표시
**상태**:
- 광고 로딩 중
- 광고 시청 중
- 광고 완료
- 광고 실패
- 보상 지급 중
- 보상 지급 완료
**에러 처리**:
- 광고 로드 실패
- 광고 시청 실패
- 보상 지급 실패
- 네트워크 오류
**권한 요구사항**: 인증된 사용자

### 2.6 걸음수보상 화면 (/rewards/steps)
**목적**: 걸음수 달성을 통한 복권 지급
**컨텐츠**:
- 현재 걸음수
- 각 임계값별 진행 상황
- 달성된 임계값 표시
- 보상 수령 버튼
**상태**:
- 걸음수 로딩 중
- 임계값 달성
- 임계값 미달성
- 보상 수령 중
- 보상 수령 완료
**에러 처리**:
- 걸음수 데이터 로드 실패
- 보상 수령 실패
- 권한 오류
**권한 요구사항**: 건강/활동 권한

### 2.7 출석체크 화면 (/attendance)
**목적**: 일일 출석체크를 통한 복권 지급
**컨텐츠**:
- 출석체크 버튼
- 출석 현황
- 연속 출석 일수
**상태**:
- 출석체크 가능
- 출석체크 완료
- 출석체크 불가 (이미 완료)
**에러 처리**:
- 출석체크 실패
- 네트워크 오류
**권한 요구사항**: 인증된 사용자

### 2.8 초대 화면 (/referral)
**목적**: 친구 초대를 통한 복권 지급
**컨텐츠**:
- 초대 코드
- 초대 링크 공유 버튼
- 초대 현황
- 초대 성공 시 보상 정보
**상태**:
- 초대 코드 생성 중
- 초대 링크 생성 완료
- 초대 성공
- 초대 실패
**에러 처리**:
- 초대 코드 생성 실패
- 초대 링크 생성 실패
- 초대 처리 실패
**권한 요구사항**: 인증된 사용자

### 2.9 내 응모 화면 (/my-tickets)
**목적**: 사용자의 복권 응모 현황 확인
**컨텐츠**:
- 현재 회차 정보
- 응모한 복권 수
- 응모 히스토리
- 복권 번호 목록
**상태**:
- 데이터 로딩 중
- 응모 내역 있음
- 응모 내역 없음
**에러 처리**:
- 데이터 로드 실패
- 네트워크 오류
**권한 요구사항**: 인증된 사용자

### 2.10 응모 결과 화면 (/results)
**목적**: 당첨 결과 확인
**컨텐츠**:
- 회차별 결과 목록
- 당첨 번호
- 당첨 등수
- 당첨금 정보
- KYC 제출 버튼 (1,2등만)
**상태**:
- 결과 로딩 중
- 당첨
- 미당첨
- KYC 제출 필요
- KYC 제출 완료
**에러 처리**:
- 결과 로드 실패
- KYC 제출 실패
**권한 요구사항**: 인증된 사용자

### 2.11 결과 상세 화면 (/results/:roundId)
**목적**: 특정 회차 결과 상세 확인
**컨텐츠**:
- 회차 정보
- 당첨 번호
- 내 복권 번호와 매칭 결과
- 당첨 등수별 상세 정보
- 당첨금 정보
**상태**:
- 데이터 로딩 중
- 당첨 상세 정보
- 미당첨
**에러 처리**:
- 데이터 로드 실패
- 회차 정보 없음
**권한 요구사항**: 인증된 사용자

### 2.12 KYC 제출 화면 (/results/:roundId/kyc)
**목적**: 1,2등 당첨자 KYC 정보 제출
**컨텐츠**:
- KYC 제출 안내
- 실명 입력
- 주민등록번호 입력
- 은행명 입력
- 계좌번호 입력
- 신분증 사진 업로드
- 통장 사본 업로드
- 제출 버튼
**상태**:
- 폼 입력 중
- 파일 업로드 중
- 제출 중
- 제출 완료
- 제출 실패
**에러 처리**:
- 파일 업로드 실패
- 제출 실패
- 유효성 검사 실패
**권한 요구사항**: 1,2등 당첨자만

### 2.13 이용방법 화면 (/how-it-works)
**목적**: 앱 사용법 및 정책 안내
**컨텐츠**:
- 응모 방법
- 추첨 방법
- 당첨금 안내
- 당첨금 수령 방법
- 약관 및 개인정보처리방침
**상태**:
- 정적 콘텐츠
**에러 처리**: 없음
**권한 요구사항**: 없음

### 2.14 설정 화면 (/settings)
**목적**: 앱 설정 및 계정 관리
**컨텐츠**:
- 알림 설정
- 계정 정보
- 약관 및 개인정보처리방침
- 앱 버전
- 로그아웃
**상태**:
- 설정 로딩 중
- 설정 완료
**에러 처리**:
- 설정 저장 실패
- 로그아웃 실패
**권한 요구사항**: 인증된 사용자

### 2.15 어드민 화면 (/admin)
**목적**: 관리자 기능 접근
**컨텐츠**:
- 회차 관리
- 당첨자 관리
- KYC 검토
- 감사 로그
**상태**:
- 관리자 권한 확인 중
- 관리자 메뉴
- 권한 없음
**에러 처리**:
- 권한 확인 실패
- 관리자 기능 오류
**권한 요구사항**: 관리자 권한

### 2.16 회차 관리 화면 (/admin/rounds)
**목적**: 회차 생성 및 관리
**컨텐츠**:
- 회차 목록
- 새 회차 생성
- 회차 편집
- 발표 번호 입력
**상태**:
- 회차 목록 로딩 중
- 회차 생성 중
- 회차 편집 중
**에러 처리**:
- 회차 생성 실패
- 회차 편집 실패
- 발표 번호 입력 실패
**권한 요구사항**: 관리자 권한

### 2.17 회차 상세 화면 (/admin/rounds/:roundId)
**목적**: 특정 회차 상세 관리
**컨텐츠**:
- 회차 정보
- 발표 번호 입력
- 당첨자 목록
- KYC 대기 목록
- 정산 상태
**상태**:
- 회차 정보 로딩 중
- 발표 번호 입력 중
- 당첨자 처리 중
**에러 처리**:
- 회차 정보 로드 실패
- 발표 번호 입력 실패
- 당첨자 처리 실패
**권한 요구사항**: 관리자 권한

## 3. 상태 관리 구조

### 3.1 전역 상태
- **인증 상태**: 로그인/로그아웃, 사용자 정보
- **앱 상태**: 온보딩 완료 여부, 권한 상태
- **네트워크 상태**: 온라인/오프라인

### 3.2 기능별 상태
- **보상 상태**: 각 보상의 수령 가능 여부, 진행 상황
- **응모 상태**: 보유 복권 수, 응모 내역
- **결과 상태**: 당첨 결과, KYC 상태

### 3.3 UI 상태
- **로딩 상태**: 각 화면별 로딩 인디케이터
- **에러 상태**: 에러 메시지, 재시도 버튼
- **성공 상태**: 성공 메시지, 다음 액션 안내

## 4. 데이터 흐름

### 4.1 사용자 데이터
- **프로필**: 닉네임, 프로필 사진, 가입일
- **보상**: 일일 진행 상황, 수령 내역
- **응모**: 복권 번호, 응모 회차
- **결과**: 당첨 등수, 당첨금, KYC 상태

### 4.2 시스템 데이터
- **회차**: 회차 번호, 발표일, 당첨 번호
- **정책**: 보상 정책, 당첨금 정책
- **통계**: 사용자 통계, 참여 통계

## 5. 권한 및 보안

### 5.1 사용자 권한
- **일반 사용자**: 기본 기능 사용
- **관리자**: 모든 기능 사용

### 5.2 데이터 접근 권한
- **개인 데이터**: 본인 데이터만 접근
- **공개 데이터**: 모든 사용자 접근 가능
- **관리자 데이터**: 관리자만 접근

### 5.3 보안 정책
- **인증**: JWT 토큰 기반
- **권한**: RLS 정책 적용
- **암호화**: 민감 정보 암호화 저장
